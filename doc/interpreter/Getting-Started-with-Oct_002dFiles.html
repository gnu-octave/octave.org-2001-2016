<html lang="en">
<head>
<title>Getting Started with Oct-Files - Untitled</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Untitled">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Oct_002dFiles.html#Oct_002dFiles" title="Oct-Files">
<link rel="next" href="Matrices-and-Arrays-in-Oct_002dFiles.html#Matrices-and-Arrays-in-Oct_002dFiles" title="Matrices and Arrays in Oct-Files">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
td,p {
font-family: arial,sans-serif;
color: #000000;
}

body {
  background: white;
  color: #000000;
  font-family: arial,sans-serif;
  font-weight: normal;
  font-size: medium;
  min-width: 500px;
  max-width: 950px;
  margin-left: 3%;
  margin-right: 12%;
}

a:link {
color: #0050fa;
}

a:visited {
color: #1188ff;
}

.code {
margin-left: 30px;
margin-right: 30px;
background-color: #d0d0d0;
color: #000000;
}

/* the navigation choices at the bottom of the page. */

div#nav {
color: #000000;
float: left;
font-family: arial,sans-serif;
font-size: 0.75em;
margin: 1em 0 0 1em;
padding: 0;
position: fixed;
text-align: left;
width: 10em;
}

div#nav a {
background-color: #dde4ff;
border: 1px solid;
border-color: #10a0ff;
display: block;
padding: 0.2em 0.5em 0.2em 0.5em ;
text-decoration: none;
color: #1155dd;
}

div#nav a:hover {
background-color: #f5f5ff;
}

div#nav div#currentnav {
background-color: #ccccdd;
border: solid;
border-left-width: 1px;
border-top-width: 1px;
border-bottom-width: 1px;
border-right-width: 0px;
border-color: #10a0ff;
display: block;
padding: 0.2em 0.5em 0.2em 0.5em ;
text-align: right;
}

/* the page content */

div#content {
  position: relative;
  left: 11em;
  width: 80%;
}

div.section {
  clear: both;
}

/* For all page footers */
div#footer {
clear: both;
font-size: x-small;
text-align: center;
color: #606060;
}

/* the title bar */

div#title {
width: 100%;
clear: both;
}

div#title h1 {
background-color: #ffffff;
border-bottom: 5px solid #33ccff;
font-size: xx-large;
color: #10a0ff;
padding: 0;
margin: 0;
}

/* The blue title bar on non-main pages */

.header {
color: #ffffff;
background-color: #10a0ff;
font-family: arial,sans-serif;
padding: 0;
font-size: medium;
font-weight: bold;
border: 3px solid #10a0ff;
}

/* For the download page */

/* descriptions of versions available */
dt {
font-weight: bold;
}

dd {
font-family: arial,sans-serif;
}

/* Highlighting the code download sections */
.download {
background-color: #d0e0ff;
}

caption {
display: none;
}

th {
text-align: left;
}

/* Changes for Octave Wiki */

h1 {
background-color: #10a0ff;
color: #ffffff;
font-size: xx-large;
padding: 2em;
margin: 8em;
}

h2 {
background-color: #10a0ff;
color: #ffffff;
font-size: 1.2em;
padding: 2px;
margin-top: 5px;
}

h3 {
background-color: #10a0ff;
color: #ffffff;
font-size: 1.1em;
padding: 2px;
margin-top: 5px;
}

h4,h5,h6 {
color: #606060;
font-size: large;
padding: 2px;
margin-top: 5px;
}

/* for links in the header */
h1 a {
color: #ffffff;
}

#im {
float: right;
margin: 10px;
border: 2px solid #000000;
}

#iml {
margin: 10px;
float: right;
border: 2px solid #000000;
clear: right;
}

img.left { float:left; margin:1em; }
img.right { float:right; margin:1em; }
img.middle { text-align:center; margin:1em; }

img.logo { float: right; clear: right; border-style:none; }

pre {
border: #777777 1px solid;
padding: 0.5em;
margin-left: 1em;
margin-right: 2em;
white-space: pre;
background-color: #e6e6e6;
color: black;
}

blockquote.note {
border: #777777 1px solid;
padding: 0.5em;
margin-left: 1em;
margin-right: 2em;
background-color: #e6e6e6;
color: black;
}
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Getting-Started-with-Oct-Files"></a>
<a name="Getting-Started-with-Oct_002dFiles"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Matrices-and-Arrays-in-Oct_002dFiles.html#Matrices-and-Arrays-in-Oct_002dFiles">Matrices and Arrays in Oct-Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Oct_002dFiles.html#Oct_002dFiles">Oct-Files</a>
<hr>
</div>

<h4 class="subsection">A.1.1 Getting Started with Oct-Files</h4>

<p>The basic command to build oct-files is <code>mkoctfile</code> and it can be
call from within octave or from the command line.

   <p><a name="doc_002dmkoctfile"></a>

<div class="defun">
&mdash; Function File:  <b>mkoctfile</b> [<var>-options</var>]<var> file <small class="dots">...</small><a name="index-mkoctfile-1944"></a></var><br>
<blockquote>
<p>The <code>mkoctfile</code> function compiles source code written in C,
C++, or Fortran.  Depending on the options used with <code>mkoctfile</code>, the
compiled code can be called within Octave or can be used as a stand-alone
application.

        <p><code>mkoctfile</code> can be called from the shell prompt or from the Octave
prompt.

        <p><code>mkoctfile</code> accepts the following options, all of which are optional
except for the file name of the code you wish to compile:

          <dl>
<dt>`<samp><span class="samp">-I DIR</span></samp>'<dd>Add the include directory DIR to compile commands.

          <br><dt>`<samp><span class="samp">-D DEF</span></samp>'<dd>Add the definition DEF to the compiler call.

          <br><dt>`<samp><span class="samp">-l LIB</span></samp>'<dd>Add the library LIB to the link command.

          <br><dt>`<samp><span class="samp">-L DIR</span></samp>'<dd>Add the library directory DIR to the link command.

          <br><dt>`<samp><span class="samp">-M</span></samp>'<dt>`<samp><span class="samp">--depend</span></samp>'<dd>Generate dependency files (.d) for C and C++ source files.

          <br><dt>`<samp><span class="samp">-c</span></samp>'<dd>Compile but do not link.

          <br><dt>`<samp><span class="samp">-g</span></samp>'<dd>Enable debugging options for compilers.

          <br><dt>`<samp><span class="samp">-o FILE</span></samp>'<dt>`<samp><span class="samp">--output FILE</span></samp>'<dd>Output file name.  Default extension is .oct
(or .mex if &ndash;mex is specified) unless linking
a stand-alone executable.

          <br><dt>`<samp><span class="samp">-p VAR</span></samp>'<dt>`<samp><span class="samp">--print VAR</span></samp>'<dd>Print the configuration variable VAR.  Recognized variables are:

          <pre class="example">                  ALL_CFLAGS                FFTW_LIBS
                  ALL_CXXFLAGS              FLIBS
                  ALL_FFLAGS                FPICFLAG
                  ALL_LDFLAGS               INCFLAGS
                  BLAS_LIBS                 LDFLAGS
                  CC                        LD_CXX
                  CFLAGS                    LD_STATIC_FLAG
                  CPICFLAG                  LFLAGS
                  CPPFLAGS                  LIBCRUFT
                  CXX                       LIBOCTAVE
                  CXXFLAGS                  LIBOCTINTERP
                  CXXPICFLAG                LIBREADLINE
                  DEPEND_EXTRA_SED_PATTERN  LIBS
                  DEPEND_FLAGS              OCTAVE_LIBS
                  DL_LD                     RDYNAMIC_FLAG
                  DL_LDFLAGS                RLD_FLAG
                  F2C                       SED
                  F2CFLAGS                  XTRA_CFLAGS
                  F77                       XTRA_CXXFLAGS
                  FFLAGS
          </pre>
          <br><dt>`<samp><span class="samp">--link-stand-alone</span></samp>'<dd>Link a stand-alone executable file.

          <br><dt>`<samp><span class="samp">--mex</span></samp>'<dd>Assume we are creating a MEX file.  Set the default output extension
to ".mex".

          <br><dt>`<samp><span class="samp">-s</span></samp>'<dt>`<samp><span class="samp">--strip</span></samp>'<dd>Strip the output file.

          <br><dt>`<samp><span class="samp">-v</span></samp>'<dt>`<samp><span class="samp">--verbose</span></samp>'<dd>Echo commands as they are executed.

          <br><dt>`<samp><span class="samp">file</span></samp>'<dd>The file to compile or link. Recognised file types are

          <pre class="example">                                 .c    C source
                                 .cc   C++ source
                                 .C    C++ source
                                 .cpp  C++ source
                                 .f    Fortran source
                                 .F    Fortran source
                                 .o    object file
          </pre>
          </dl>
        </p></blockquote></div>

   <p>Consider the short example

<pre class="example"><pre class="verbatim">     #include &lt;octave/oct.h>
     
     DEFUN_DLD (helloworld, args, nargout,
       "Hello World Help String")
     {
       int nargin = args.length ();
       octave_stdout &lt;&lt; "Hello World has " &lt;&lt; nargin 
             &lt;&lt; " input arguments and "
             &lt;&lt; nargout &lt;&lt; " output arguments.\n";
       return octave_value_list ();
     }
</pre>
</pre>
   <p>This example although short introduces the basics of writing a C++
function that can be dynamically linked to Octave.  The easiest way to
make available most of the definitions that might be necessary for an
oct-file in Octave is to use the <code>#include &lt;octave/oct.h&gt;</code>
header.

   <p>The macro that defines the entry point into the dynamically loaded
function is <code>DEFUN_DLD</code>.  This macro takes four arguments, these being

     <ol type=1 start=1>
<li>The function name as it will be seen in Octave,
<li>The list of arguments to the function of type <code>octave_value_list</code>,
<li>The number of output arguments, which can and often is omitted if
not used, and
<li>The string that will be seen as the help text of the function.
        </ol>

   <p>The return type of functions defined with <code>DEFUN_DLD</code> is always
<code>octave_value_list</code>.

   <p>There are a couple of important considerations in the choice of function
name.  Firstly, it must be a valid Octave function name and so must be a
sequence of letters, digits and underscores, not starting with a
digit.  Secondly, as Octave uses the function name to define the filename
it attempts to find the function in, the function name in the <code>DEFUN_DLD</code>
macro must match the filename of the oct-file.  Therefore, the above
function should be in a file <samp><span class="file">helloworld.cc</span></samp>, and it should be
compiled to an oct-file using the command

<pre class="example">     mkoctfile helloworld.cc
</pre>
   <p>This will create a file call helloworld.oct, that is the compiled
version of the function.  It should be noted that it is perfectly
acceptable to have more than one <code>DEFUN_DLD</code> function in a source
file.  However, there must either be a symbolic link to the oct-file for
each of the functions defined in the source code with the <code>DEFUN_DLD</code>
macro or the autoload (<a href="Function-Files.html#Function-Files">Function Files</a>) function should be used.

   <p>The rest of this function then shows how to find the number of input
arguments, how to print through the octave pager, and return from the
function.  After compiling this function as above, an example of its use
is

<pre class="example">     helloworld (1, 2, 3)
     -| Hello World has 3 input arguments and 0 output arguments.
</pre>
   </body></html>

